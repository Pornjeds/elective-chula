
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>การลงทะเบียนวิชาเรียน: Y-Ex, subjective</title>

    <!-- Bootstrap core CSS -->
    <link href="../scripts/css/bootstrap.min.css" rel="stylesheet">
    <link href="../scripts/css/jasny-bootstrap.min.css" rel="stylesheet">
    <link href="../scripts/css/bootstrap-select.min.css" rel="stylesheet">
    <link href="../scripts/css/jquery-ui.min.css" rel="stylesheet" >

    <!-- Custom styles for this template -->
    <link href="../scripts/css/admin_template.css" rel="stylesheet">
    
    <style>
        #sortableMain {
            width: 125px;
            list-style-type: none;
            text-align: center;
            background: #ddd;
            padding: 0px;
            position: relative;
            min-height: 26px;
            vertical-align: top;
            display: inline-block;
            margin-bottom: 5px;
        }
        
        #sortableMain li{
            position: relative;
        }
        
        ul[id*='sortable']:not(#sortableMain) {
            width: 125px;
            min-height: 26px;
            height: 26px;
            list-style-type: none;
            margin-top: 2px;
            background: #ddd;
            text-align: center;
            margin-left: 1px;
            position: relative;
        }
        
        ul[id*='sortable'] li {
            font-size: 1.2em;
            background-color: #dff0d8;
            border: 1px solid #d6e9c6;
            color: #000;
            width: 120px;
            margin-left: 3px;
            
            color: green;
        }
        
        li:hover{
            cursor: default;
        }
        
        tr{
            vertical-align: top;
            text-align: center;
        }
    </style>
    
  </head>

  <body>

    <div class="topnavbar">
        <div class="topnavbar-right">
          <ul>
            <li>
              <p class="topnavbar-text"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> Logged in as Admin</p>
            </li>
            <li>
              <p class="topnavbar-text"><a href="../index.html">Log out</a></p>
            </li>
          </ul>
        </div>
    </div>

  <div class="navmenu navmenu-default navmenu-fixed-left offcanvas">
      <a class="navmenu-brand" href="#">Y-EX MBA</a>
      <ul class="nav navmenu-nav">
        <li><a href="../navmenu/">Import ข้อมูล</a></li>
        <li class="active"><a href="./">จัดการวิชาเรียน</a></li>
        <li><a href="../navmenu-reveal/">แสดงผลการเลือก</a></li>
      </ul>
      <ul class="nav navmenu-nav">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Advance<b class="caret"></b></a>
          <ul class="dropdown-menu navmenu-nav">
            <li><a href="#">จัดการสิทธิ์</a></li>
            <li><a href="#">แก้ไขข้อมูลใน Database</a></li>
            <li class="divider"></li>
            <li class="dropdown-header">Nav header</li>
            <li><a href="#">Separated link</a></li>
            <li><a href="#">One more separated link</a></li>
          </ul>
        </li>
      </ul>
      <ul class="nav navmenu-nav">
        <li><a href="#"><font color="red">ออกจากระบบ</font></a></li>
      </uL>
    </div>

    <div class="navbar navbar-default navbar-fixed-top">
      <button type="button" class="navbar-toggle" data-toggle="offcanvas" data-target=".navmenu" data-canvas="body">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>


    <div class="container">

      <ol class="breadcrumb">
        <li><a href="admin_dashboard.html">Home</a></li>
        <li class="active">การลงทะเบียนวิชาเรียน<li>
      </ol>

      <div class="starter-template">
        <h1>การลงทะเบียนวิชาเรียน</h1>
        <p>
          โปรดเลือกรุ่นของนักศึกษาและเทอมที่ต้องการอัพเดทวิชาเลือก
        </p>
      </div>
      <div style='background:#f6f6f6; width: 100%; border: 1px solid #c8c8c8; text-align: center;'>
            <div style='padding:10px;'>
                <div style='padding: 5px 5px 5px 5px; margin-right: 5px; display: inline-block;'>
                    <select id='studentClass' class="selectpicker">
                        <option value="" selected disabled>รุ่นนักศึกษา</option>
                        <option>20/1</option>
                        <option>20/2</option>
                        <option>21/1</option>
                        <option>21/2</option>
                    </select>
                </div> 
                <div style='padding: 5px 5px 5px 5px; margin-right: 5px; display: inline-block;'>
                    <select id='studentClass' class="selectpicker">
                        <option value="" selected disabled>เทอม</option>
                        <option>4</option>
                        <option>5</option>
                        <option>6</option>
                    </select>
                </div> 
                <input style='margin-left: 8px;' type='button' class="btn btn-success" onClick=';' value='Update' />
            </div>
         </div>
      <hr>
      
      <div id='step1Area' style='line-height: 26px; width: 900px;'>
            <table>
                <tr>
                    <td><h4>วิชาเลือกทั้งหมด</h4></td>
                    <td style='width: 40px;'></td>
                    <td><h4>วิชาเลือกสำหรับเทอมนี้<span id='countSelected'>(0)</span></h4></td>
                </tr>
                <tr>
                    <td>
                        <ul id="sortableMain" class="connectedSortable">
                            <li>วิชา A</li>
                            <li>วิชา B</li>
                            <li>วิชา C</li>
                            <li>วิชา D</li>
                            <li>วิชา E</li>
                            <li>วิชา F</li>
                            <li>วิชา G</li>
                            <li>วิชา H</li>
                            <li>วิชา I</li>
                            <li>วิชา J</li>
                            <li>วิชา K</li>
                        </ul>
                    </td>
                    <td></td>
                    <td>
                        <div id='selectedZone' style='display: inline-block; background: #efefef; display: inline-block; color: #666;'></div>
                    </td>
                </tr>
            </table>
            
            <div style='margin-top: 20px;'>
                <input id='bt_next' type='button' class="btn btn-primary" onClick='toggleToSteps(2)' value='Next' />
            </div>
      </div>
        
      <div id='step2Area' style='line-height: 26px; width: 900px;display:none;'>
            <div style='margin-top: 20px;'>
                <input id='bt_back' type='button' class="btn btn-primary" onClick='toggleToSteps(1)' value='Back' />
                <input style='margin-left: 20px;' id='bt_submit' type='button' class="btn btn-success" onClick='' value='Submit' />
            </div>
      </div>
      
      <hr>
      <footer class="footer">
          <div style='margin-bottom: 60px'>
            We are the same <span style='color:#cb70d7; font-weight: bold;'>CHULA</span> so let talk together.
          </div>
        </footer>

    </div><!-- /.container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../scripts/js/jquery.min.js"></script>
    <script src="../scripts/js/jquery-ui.min.js"></script>
    <script src="../scripts/js/bootstrap.min.js"></script>
    <script src="../scripts/js/jasny-bootstrap.min.js"></script>    
    <script src="../scripts/js/bootstrap-select.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../scripts/js/ie10-viewport-bug-workaround.js"></script>

    <script>
        $(document).ready(function () {
            $('.selectpicker').selectpicker();
            
            //ADD <UL> LANDING ITEMS
            var selectedZoneElement = document.getElementById('selectedZone');
            var initialNum = 5;
            for( var i=0; i< initialNum; i++){
                var tmpUIElement =  document.createElement('ul');
                tmpUIElement.id = 'sortable' + i;
                tmpUIElement.className = 'connectedSortable';
                tmpUIElement.style.padding = '0px';
                tmpUIElement.style.marginBottom = '0px';
                selectedZoneElement.appendChild( tmpUIElement );
            }
            
            //BIND DRAG/SORABLE EVENT
            $( '.connectedSortable' ).sortable({
                connectWith: ".connectedSortable",
                stop: function( event, ui) {
                    var sortableElements = $('.connectedSortable');
                    for(var i=0; i< sortableElements.length; i++){
                        if( sortableElements[ i ].id !== 'sortableMain' && sortableElements[ i ].children.length > 1 ){
                            $(this).sortable( 'cancel');
                        }
                    }
                    var countSelectedItem = countSelectedItemText();
                    if( $('#selectedZone').children().length <= countSelectedItem ){
                        var tmpUIElement =  document.createElement('ul');
                        tmpUIElement.id = 'sortable' + (countSelectedItem+1) ;
                        tmpUIElement.className = 'connectedSortable';
                        tmpUIElement.style.padding = '0px';
                        tmpUIElement.style.marginBottom = '0px';
                        $('#selectedZone').append( tmpUIElement );
                        //ACTIVATE FOR NEW ITEM ADDED
                        $( '.connectedSortable' ).sortable({
                            connectWith: ".connectedSortable"
                        }).disableSelection();
                    }
                },
                receive: function(){
                    countSelectedItemText();
                }
            }).disableSelection();
        });
        
        //COUNT <LI> FOR MANAGE ADDTIONAL <UL> LANDING ITEMS
        function countSelectedItemText(){
            var countSelectedItem = 0;
            $('#selectedZone').children().each(function(){
                if( $(this).children().length > 0 ){
                    countSelectedItem++;
                }
            });
            //UPDATE NUMBER OF SELECTION
            $('#countSelected').text( '(' + countSelectedItem +')' );
            return countSelectedItem;
        }

        function toggleToSteps( value ){
            if( value === 1 ){
                $('#step1Area').fadeIn(300);
                $('#step2Area').fadeOut(300);
            }else if( value === 2 ){
                if( countSelectedItemText() === 0 ){
                    alert( 'Please select subjects first.' );
                    return;
                }
                $('#step1Area').fadeOut(300);
                $('#step2Area').fadeIn(300);
            }
        }
    </script>
  
    </body>
</html>
